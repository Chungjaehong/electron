<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
		<link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

		<link href="./css/axis/AXJ.css" rel="stylesheet" />
		<link href="./css/axis/AXInput.css" rel="stylesheet" />
		<link href="./css/axis/AXGrid.css" rel="stylesheet" />
		<link href="./css/axis/AXButton.css" rel="stylesheet" />
		<link href="./css/axis/AXProgress.css" rel="stylesheet" />
    	<link href="./css/bootstrap.min.css" rel="stylesheet">
    	<link href="./css/style.css" rel="stylesheet">


		<script>window.$ = window.jQuery = require('./js/jquery-3.1.0.js');</script>
		<script src="./js/axis/AXJ.js"></script>
		<script src="./js/axis/AXProgress.js"></script>
		<script src="./js/axis/AXGrid.js"></script>
		<script src="./js/bootstrap.min.js"></script>
		
  </head>
  <style type="css/text">

  </style>
  <body>
		<div class="container-fluid">
			<div class="row">
				<div class="col-md-12">
					
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<div class="row">
						<div class="col-md-6">
							<input type="button" id="btnUser" value="계정 동기화" class="AXButton Blue">
						</div>
						<div class="col-md-6 text-right">
							<input type="button" id="btnGroup" value="그룹 동기화" class="AXButton Blue">
						</div>
					</div>
					<ul class="nav nav-tabs">
						<li class="active" id="userDataMenu">
							<a href="#">계정정보</a>
						</li>
						<li id="groupDataMenu">
							<a href="#">자동 입찰</a>
						</li>
					</ul>
					<div class="row">
						<div class="col-md-12">
							<webview  id="foo" style="width:1000px; height:1000px"></webview>
							<div id="userDataDiv"> 
								<h4>[그룹 리스트]</h4>
								<div id="userDataGrid"></div>
							</div>
							
							<div id="groupDataDiv">
								<h5>비즈니스머니 잔액 : </h5><p id="myMoney"></p>
								<div id="groupDataGrid" style="height:150px;"></div>
								<h4>[키워드 리스트]</h4>
								<div id="keywordGrid" style="height:550px;"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<iframe id="ifrView" src="http://searchad.naver.com" frameborder="0" width="1000" height="1000" onload="urlMoveEvent(this.contentWindow.location.href);"></iframe>
	</div>
  </body>

<script>
	webview = document.getElementById('foo');
	webview.src = "http://searchad.naver.com/Login";
	
	//화면 구성
	$("#ifrView").show();
	$("#userDataDiv").hide();
	$("#groupDataDiv").hide();

	require('./js/dataPick.js');
	require('./js/gridMake.js');

	onload = () => {
		webview.addEventListener('dom-ready', (e) => {
		  webview.executeJavaScript('console.log(ENV.customerId)');
		});

		webview.addEventListener('console-message', (e) => {
		  if(e.message >0 ){//id값 가져오고 나서
				$("#foo").hide();

				customerId = e.message;
				webview.loadURL("https://manage.searchad.naver.com/customers/"+customerId+"/campaigns");
				$("#userDataMenu").click();
		  }
		});
  	}//onload Event

	function urlMoveEvent(url){//iframe onload
		if(url == cmpUrl){
			intervalCmpFunction = setInterval("dataPickCmp()", 1000);
		}
		if(url == grpUrl){
			intervalGrpFunction = setInterval("dataPickGrp()", 1000);
		}
	}

	$(".nav-tabs a").click(function(event) {
		event.preventDefault();
		$(this).parent().addClass("active");
		$(this).parent().siblings().removeClass("active");
	});

	$("#groupDataMenu").click(function(){
		$("#groupDataDiv").show();
		$("#userDataDiv").hide();
		fnObj.groupGrid.bind();
		fnObj.keywordGrid.bind();
	});

	$("#userDataMenu").click(function(){
		$("#userDataDiv").show();
		$("#groupDataDiv").hide();
		fnObj.usergrid.bind();
		$("#userDataGrid_AX_checkAll_AX_0_AX_2").hide();
	});
</script>

<script>
	require('./renderer.js')
</script>


</html>
